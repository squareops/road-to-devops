# Docker Volumes

Volumes are the preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are dependent on the directory structure and OS of the host machine, volumes are completely managed by Docker. Volumes have several advantages over bind mounts:

- Volumes are easier to back up or migrate than bind mounts.
- You can manage volumes using Docker CLI commands or the Docker API.
- Volumes work on both Linux and Windows containers.
- Volumes can be more safely shared among multiple containers.
- Volume drivers let you store volumes on remote hosts or cloud providers, to encrypt the contents of volumes, or to add other functionality.
- New volumes can have their content pre-populated by a container.
- Volumes on Docker Desktop have much higher performance than bind mounts from Mac and Windows hosts.

In addition, volumes are often a better choice than persisting data in a container’s writable layer, because a volume does not increase the size of the containers using it, and the volume’s contents exist outside the lifecycle of a given container.

## 1. Create and manage volumes
you can create and manage volumes outside the scope of any container.

Create a Volume:

        docker volume create my-vol

List Volumes:

        docker volume ls

Inspect Volumes: 

        docker volume inspect my-vol

Remove a volume: 

        docker volume rm my-vol

## 2. Docker run command with Volume ‘--mount’

```
docker run -d \
  --name devtest \
  --mount source=myvol2,target=/app \
  nginx:latest
```

## 3. Docker run command with Volume ‘-v’

```
docker run -d \
  --name devtest \
  -v myvol2:/app \
  nginx:latest
```

## 4. Docker stop command 
        docker container stop devtest

## 5. Docker remove command 
        docker container rm devtest
        docker volume rm myvol2

## 6. Use Docker Compose with Volume

```
services:
  frontend:
    image: node:lts
    volumes:
      - myapp:/home/node/app
volumes:
  myapp:
```
Running docker compose up for the first time creates a volume

## 7. You can create a volume directly outside of Compose using docker volume create and then reference it inside docker-compose.yml as follows:
```
services:
  frontend:
    image: node:lts
    volumes:
      - myapp:/home/node/app
volumes:
  myapp:
    external: true
```
## 8. Start a service with volumes
```
docker service create -d \
  --replicas=4 \
  --name devtest-service \
  --mount source=myvol2,target=/app \
  nginx:latest
```

        docker service ps devtest-service
        docker service rm devtest-service

### For more information

[Docker Volumes Github](https://docs.docker.com/storage/volumes/)